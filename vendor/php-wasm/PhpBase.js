/* esm.sh - esbuild bundle(php-wasm@0.0.5/PhpBase) deno production */
import __php_wasm_UniqueIndex$ from "./UniqueIndex.js";var I=Object.create;var P=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var A=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var $=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var D=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of q(e))!U.call(t,n)&&n!==r&&P(t,n,{get:()=>e[n],enumerable:!(o=M(e,n))||o.enumerable});return t};var V=(t,e,r)=>(r=t!=null?I(F(t)):{},D(e||!t||!t.__esModule?P(r,"default",{value:t,enumerable:!0}):r,t));var j=$(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.PhpBase=void 0;var x=__php_wasm_UniqueIndex$;function b(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b=function(r){return typeof r}:b=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},b(t)}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function G(t,e,r){return e&&E(t.prototype,e),r&&E(t,r),t}function L(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function W(t){var e=R();return function(){var o=y(t),n;if(e){var u=y(this).constructor;n=Reflect.construct(o,arguments,u)}else n=o.apply(this,arguments);return H(this,n)}}function H(t,e){return e&&(b(e)==="object"||typeof e=="function")?e:J(t)}function J(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t){var e=typeof Map=="function"?new Map:void 0;return O=function(o){if(o===null||!K(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(o))return e.get(o);e.set(o,n)}function n(){return d(o,arguments,y(this).constructor)}return n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,o)},O(t)}function d(t,e,r){return R()?d=Reflect.construct:d=function(n,u,m){var f=[null];f.push.apply(f,u);var _=Function.bind.apply(n,f),v=new _;return m&&s(v,m.prototype),v},d.apply(null,arguments)}function R(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function K(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function s(t,e){return s=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o},s(t,e)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},y(t)}var h="string",S="number",Q=function(t){L(r,t);var e=W(r);function r(o){var n,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z(this,r),n=e.call(this);var m={};n.returnValue=-1,n.onerror=function(){},n.onoutput=function(){},n.onready=function(){};var f=new x.UniqueIndex,_=new x.UniqueIndex,v={callbacks:f,targets:_,postRun:function(){var i=new CustomEvent("ready");n.onready(i),n.dispatchEvent(i)},print:function(){for(var i=arguments.length,p=new Array(i),c=0;c<i;c++)p[c]=arguments[c];var l=new CustomEvent("output",{detail:p.map(function(w){return w+`
`})});n.onoutput(l),n.dispatchEvent(l)},printErr:function(){for(var i=arguments.length,p=new Array(i),c=0;c<i;c++)p[c]=arguments[c];var l=new CustomEvent("error",{detail:p.map(function(w){return w+`
`})});n.onerror(l),n.dispatchEvent(l)}},B=window&&window.phpSettings?window.phpSettings:{};return n.binary=new o(Object.assign({},v,B,u)).then(function(a){var i=a.ccall("pib_init",S,[h],[]);return a}).catch(function(a){return console.error(a)}),n}return G(r,[{key:"run",value:function(n){return this.binary.then(function(u){return u.ccall("pib_run",S,[h],["?>".concat(n)])})}},{key:"exec",value:function(n){return this.binary.then(function(u){return u.ccall("pib_exec",h,[h],[n])})}},{key:"refresh",value:function(){var n=this.binary.then(function(u){return u.ccall("pib_refresh",S,[],[])});return n.catch(function(u){return console.error(u)}),n}}]),r}(O(EventTarget));g.PhpBase=Q});var T=V(j()),k=!0,{PhpBase:C}=T,{default:N,...X}=T,tt=N!==void 0?N:X;export{C as PhpBase,k as __esModule,tt as default};
